<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Movie Task List</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <h1>JOLO Movie Task List</h1>
        <div class="input-container">
            <input type="text" id="movie-input" placeholder="Add a movie...">
            <button id="add-movie">Add Movie</button>
        </div>
        <ul id="movie-list"></ul>
    </div>
    <script src="app.js"></script>
</body>
</html>

<script type="module">

    //FIREBASE CONFIGURATION
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import { getFirestore, collection, addDoc, getDocs, doc, updateDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

    const firebaseConfig = {
        apiKey: "AIzaSyAFeN6sV287qTpUmLf3Z38mUQHZOCEtYPw",
        authDomain: "jolo-watch-list.firebaseapp.com",
        projectId: "jolo-watch-list",
        storageBucket: "jolo-watch-list.firebasestorage.app",
        messagingSenderId: "21207799209",
        appId: "1:21207799209:web:db8e9fa238d5b13a80a0b8",
        measurementId: "G-QPXZWSQXKS"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);
    const moviesRef = collection(db, "movies");

    async function addMovie(movieName) {
        await addDoc(moviesRef, { name: movieName, watched: false });
        loadMovies();
    }

    async function loadMovies() {
        const querySnapshot = await getDocs(moviesRef);
        movieList.innerHTML = "";
        querySnapshot.forEach((doc) => {
            const movie = doc.data();
            const listItem = document.createElement("li");
            listItem.textContent = movie.name;

            const watchButton = document.createElement("button");
            watchButton.textContent = movie.watched ? "Watched" : "Mark as Watched";
            watchButton.addEventListener("click", async () => {
                await updateDoc(doc(db, "movies", doc.id), { watched: !movie.watched });
                loadMovies();
            });

            listItem.appendChild(watchButton);
            movieList.appendChild(listItem);
        });
    }

    addMovieButton.addEventListener("click", () => {
        const movieName = movieInput.value.trim();
        if (movieName !== "") {
            addMovie(movieName);
            movieInput.value = "";
        }
    });

    loadMovies();
</script>
